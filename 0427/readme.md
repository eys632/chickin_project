# 닭 사망 확률 추적 시스템

## 개요

이 프로젝트는 YOLO 객체 탐지 모델과 ByteTrack 추적기를 활용하여,  
닭 사육장 영상에서 닭들의 움직임을 추적하고,  
움직임이 멈춘 시간을 기반으로 사망 확률을 계산하여  
박스와 함께 표시하는 시스템입니다.

결과물로는  
- 박스와 사망 확률이 시각화된 **영상(result.mp4)**  
- 프레임별 닭의 위치 및 사망 확률을 기록한 **CSV(result.csv)**  
가 생성됩니다.

## 코드 설명

1. **모델 로드**  
- 미리 학습된 YOLO 모델(`best.pt`)을 로드합니다.

2. **결과 저장 경로 생성**  
- 실행 시마다 새로운 폴더를 자동으로 만들어 결과를 저장합니다.
- 
3. **영상 불러오기**  
- 지정된 경로에 있는 닭 사육장 영상을 불러옵니다.

4. **프레임 처리 및 추적**  
- 프레임마다 YOLO 객체 탐지 후 ByteTrack으로 개체를 추적합니다.

5. **움직임 분석 및 사망 확률 계산**  
- 각 닭 ID별로 중심 좌표 이동량을 기록하고,  
- 이동이 없었던 프레임 수를 기준으로 사망 확률을 계산합니다.  
  (30초 이상 40%, 1분 이상 50%, 2분 이상 70%, 4분 이상 80% + 추가 상승)

6. **결과 저장**  
- 분석이 끝나면 다음을 자동 저장합니다:
  - 박싱 및 확률 표시된 최종 영상 (.mp4)
  - 각 프레임별 ID, 중심 좌표, 사망 확률을 기록한 CSV 파일 (.csv)

- 저장 경로 예시:  
  /home/a202192020/객체탐지 프로젝트(송교수님)/chicken_proj/run_20250409_030821/

7. **주의사항**  
- 분석할 영상의 해상도와 FPS가 너무 높으면 처리 시간이 오래 걸릴 수 있습니다.  
- 영상 크기가 너무 크면, 프레임마다 객체 수가 많아 메모리 사용량이 급격히 증가할 수 있습니다.  
- GPU 메모리가 부족할 경우, 모델이 강제 종료될 수 있으니 주의하세요.  
- 반드시 모델 경로(model_path)와 분석할 영상 경로(video_path)를 자신의 환경에 맞게 수정해야 합니다.  

8. **추후 개선사항**  
- 4분할(좌상, 우상, 좌하, 우하)로 나눈 뒤 각각 별도로 분석하고 최종적으로 다시 합치는 방식 적용 예정입니다.  
- 주변부(영상 가장자리) 객체 인식률 개선을 위해 분할 분석 및 통합 방법을 세밀하게 조정할 예정입니다.  
- 확률 계산 로직을 더 세분화하여 사망 확률을 더 자연스럽게 증가시키는 방안도 고려 중입니다.  
- 다수의 영상에 대해 배치(batch) 처리하는 기능 추가 예정입니다.  
